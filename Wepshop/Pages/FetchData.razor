@page "/fetchdata"
@inject HttpClient Http

<h1>Weather forecast</h1>

<p>This component demonstrates fetching data from the server.</p>

@if (products == null)
{
    <p>
        <em>Loading...</em>
    </p>
}
else
{
    <table class="table table-striped">
        <thead>
        <tr>
            <th>Name</th>
            <th>Category</th>
            <th>Vendor</th>
            <th>Price</th>
        </tr>
        </thead>
        <tbody>
        @foreach (var prod in products)
        {
            <tr>
                <td>@prod.Name</td>
                <td>@prod.Category</td>
                <td>@prod.Vendor</td>
                <td>@prod.Price</td>
            </tr>
        }
        </tbody>
    </table>
}

@code {
    private ProductDTO[] products;

    protected override async Task OnInitializedAsync()
    {
        products = await Http.GetFromJsonAsync<ProductDTO[]>("https://192.168.236.129:5001/Shop/Products");
    }

    public class ProductDTO
    {
        public string Name { get; set; }
        public string Vendor { get; set; }
        public Double Price { get; set; }
        public string Category { get; set; }
        public int ID { get; set; }
    }

}